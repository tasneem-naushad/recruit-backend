Projects to run 
Step 1: Get the two projects running : IdentityServer and CreditCardAPI
Go to the ASB folder
1. Ctr + F5 to run the IdentityServer . https://localhost:5001/
2. New in Terminal > cd .\CreditCardApi\ >  dotnet run .\CreditCardApi.csproj

Step 2 : Test through Postman
It implements OAuth2 hence need to get the token first
Set the required values from the Configs
1.Get the Authentication toke and test the POST.
2. Test 200, 400x and 500x errors : Tested 200 and 400. For 500 may be make an exception in service layer to get it?
Like dont implement I interface?


Case 1 : Get the Authentication Token
Refer to https://localhost:5001/.well-known/openid-configuration to get the token_endpoint value

Test Case 2 : Datatype Validation
* checks for date, csv
* Credit Card type validation
* Required Field validations

Test Case 3 : POST
Test Case 4 : GET
Test Case 5 : PUT
Test Case 6 : DELETE 

------------------x-------------------------x----------
Design Considerations
Encryption : MD5 used simply for speed. AES would have been ideal
System.ComponentModel.DataAnnotations : To take advantage for CreditCard datatype validation
CreditCardItemDTO used to simply hiding/limiting access for some fields in CreditCardItemDTO
Used UseInMemoryDatabase cause I dont have SQL nor enough resources on my local System and this is POC. 
Ideally EntityFramework can be extended for Database Migration Scripts. We usually use DbUp.
Log4net used for Logging. Convienant , easy to manager and can be defined to differentiate between Dev and Production environment logging.
------------------x-------------------------x----------

Structure
Three Projects
1. Client : Currently redundant.. inteded to add Test project. Was a quick poc to get the first set of token
Was replaced by Postman script simply cause its faster and am more comfortable using Postman
Plus running multiple projects in Visual studio core was proving to be challenging
2. CreditCardAPI : My actual project with the Controller/Service layers for the API
3. IdentityServer : My identity server for generating token and authorization. 

---------------
CreditCardAPI
* Models
* Service layer
* Controller
* Interface
* Logs : txt file generated by Log4net















Pending things
* Make Controller thin : Done
* Add Encryption : Done
* Add Swagger : Done
* Add documentation : through Readme.txt and screencast : pending
* Add more test cases : Postman [updated existing]
* Add OAuth : Done
* Tidy up : remove unused code /references : Pending

------------------x-------------------------x----------

https://jwt.ms/ for decoding token
https://localhost:5001/.well-known/openid-configuration will give the token_endpoint to be used by postman to generate the token

Test credit cards
Visa 	4111111111111111 	00 	Transaction Approved 	APPROVED
Visa 	4242424242424242 	00 	Transaction Approved 	APPROVED
Visa 	4999999999999103 	00 	Transaction Approved 	APPROVED
Visa 	4999999999999236 	05 	Credit transaction is not allowed 	DO NOT HONOUR
Visa 	4999 9999 9999 9269 	12 	Invalid Transaction - declined 	ERROR - INVLD TRAN
Visa 	4999 9999 9999 9996 	54 	Card Expired 	Card Expired
Visa 	4999 9999 9999 9202 	U9 	Transaction Declined 	TIMEOUT
Visa 	4111 1111 1111 1119 		Fails Luhn Check - not valid credit card 	
Visa 	4999 9999 9999 9108 		Fails Luhn Check - not valid credit card 	
Visa 	4999 9999 9999 9109 		Fails Luhn Check - not valid credit card 	
MasterCard 	5431 1111 1111 1111 	00 	Transaction Approved 	APPROVED
MasterCard 	5123 4558 0630 8521 	00 	Transaction Approved 	APPROVED
MasterCard 	5123 4590 4605 8920 	00 	Transaction Approved 	APPROVED
MasterCard 	5427 6600 6424 1339 	00 	Transaction Approved 	APPROVED
MasterCard 	5431 1111 1111 1301 	30 	The message contains Invalid Data 	ERROR - INVLD FORMAT
MasterCard 	5431 1111 1111 1228 	51 	Not sufficient Funds in the Account 	DECLINED
MasterCard 	5999 9999 9999 9108 		Fails Luhn Check - not valid credit card 	
MasterCard 	2223 0000 1000 0005 	76 	Transaction Declined 	DECLINED
Amex 	3774 0011 1111 115 	00 	Transaction Approved 	APPROVED
Amex 	3760 0000 0000 006 	00 	Transaction Approved 	APPROVED
Amex 	3711 1111 1111 114 	00 	Transaction Approved 	APPROVED
Amex 	3712 3480 6987 034 	00 	Transaction Approved 	APPROVED
Diners 	3600 0000 0000 08 	00 	Transaction Approved 	APPROVED
Diners 	3612 3404 8703 94 	00 	Transaction Approved 	APPROVED
Diners 	3612 3409 8536 19 	00 	Transaction Approved 	APPROVED
Diners 	3612 3442 2696 33 	00 	Transaction Approved 	APPROVED
Discover 	6011 1111 1111 1117 	00 	Transaction Approved 	APPROVED
Discover 	6601 1111 1111 1113 	00 	Transaction Approved 	APPROVED
Discover 	6011 3099 0000 1248 	76 	Transaction Declined 	DECLINED
JCB 	3562 3500 0000 0003 	00 	Transaction Approved 	APPROVED
ASB True Rewards 	5000 5111 1111 1113 	00 	Transaction Approved 	APPROVED
Jetstar Test Cards 	5328 6500 0000 0006 	00 	Transaction Approved 	APPROVED
Jetstar Test Cards 	5210 0000 1000 1001 	00 	Transaction Approved 	APPROVED
Switch 	4903 1111 1111 1113 	00 	Transaction Approved 	APPROVED
Visa Electron 	4026 1111 1111 1115 	00 	Transaction Approved 	APPROVED
Warehouse Money Visa Card 	4065 9301 0900 0002 	00 	Transaction Approved 	APPROVED